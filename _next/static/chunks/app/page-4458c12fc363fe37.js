(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{6738:(e,a,t)=>{Promise.resolve().then(t.bind(t,1165))},1165:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>g});var s=t(5155),n=t(8334),l=t.n(n),i=t(2115);let r=()=>(0,s.jsx)("div",{className:l().loader,children:(0,s.jsx)("div",{className:l().spinner})}),c=e=>{let{data:a,paginated:t=!1,rowsPerPage:n=10,testId:c}=e,[o,d]=(0,i.useState)(1);if(0===a.length)return(0,s.jsx)(r,{});let _=Object.keys(a[0]),u=e=>{d(e)},h=t?a.slice((o-1)*n,o*n):a,v=Math.ceil(a.length/n);return(0,s.jsxs)("div",{children:[(0,s.jsxs)("table",{children:[(0,s.jsx)("thead",{children:(0,s.jsx)("tr",{children:_.map(e=>(0,s.jsx)("th",{children:e},e))})}),(0,s.jsx)("tbody",{children:h.map((e,a)=>(0,s.jsx)("tr",{children:_.map(a=>(0,s.jsx)("td",{className:"number"==typeof e[a]?"".concat(l().numberCell):"".concat(l().textCell),children:e[a]},a))},a))})]}),t&&(()=>{let e=[];if(v<=5)for(let a=1;a<=v;a++)e.push(a);else o<=3?e.push(1,2,3,4,"...",v):o>=v-2?e.push(1,"...",v-3,v-2,v-1,v):e.push(1,"...",o-1,o,o+1,"...",v);return(0,s.jsx)("div",{className:l().pagination,"data-testid":c,children:e.map((e,a)=>"number"==typeof e?(0,s.jsx)("button",{onClick:()=>u(e),className:e===o?l().active:"",children:e},a):(0,s.jsx)("span",{children:"..."},a))})})()]})};var o=t(5565);let d={src:"/social-ai-fredag//_next/static/media/info.3aae087e.svg",height:24,width:24,blurWidth:0,blurHeight:0},_=e=>{var a,t;let{totalVotes:n,mostWins:i,highestVotes:r,officeRanking:c,latestWinner:_,highestTotalVotes:u}=e;return(0,s.jsxs)("div",{className:l().stats,children:[(0,s.jsxs)("div",{className:l().stat_box,children:[(0,s.jsx)("div",{className:l().stat_label,children:"Totalt antal r\xf6ster"}),(0,s.jsx)("div",{className:l().stat_value,children:n})]}),(0,s.jsxs)("div",{className:"".concat(l().stat_box),children:[(0,s.jsx)("div",{className:l().stat_label,children:"Totalt flest vinster"}),(0,s.jsx)("div",{className:"".concat(l().stat_value," ").concat(l().highlight),children:i.Namn}),(0,s.jsxs)("div",{className:l().stat_subtext,children:["Antal vinster ",i["Antal vinster"]]})]}),(0,s.jsxs)("div",{className:l().stat_box,children:[(0,s.jsx)("div",{className:l().stat_label,children:"H\xf6gsta antal r\xf6ster"}),(0,s.jsx)("div",{className:l().stat_value,children:r.value}),(0,s.jsxs)("div",{className:l().stat_subtext,children:["Uppn\xe5tt av ",(0,s.jsx)("span",{className:l().highlight,children:r.name})," i runda ",r.round]})]}),(0,s.jsxs)("div",{className:l().stat_box,children:[(0,s.jsx)("div",{className:l().stat_label,children:(0,s.jsxs)("span",{title:"Flera vinnare kan vara p\xe5 en runda",style:{display:"flex",alignItems:"center",gap:"4px"},children:["Kontor ranking (antal vinster) ",(0,s.jsx)(o.default,{src:d,alt:"",height:16,width:16})]})}),(0,s.jsxs)("div",{className:l().stat_value,children:["\uD83E\uDD47 ",(0,s.jsxs)("span",{className:l().highlight,children:[" ",null===(a=c[0])||void 0===a?void 0:a.office]})," ",null===(t=c[0])||void 0===t?void 0:t.wins]}),(0,s.jsx)("div",{className:l().stat_subtext,children:(0,s.jsx)("div",{className:l().officeRanking,children:c.slice(1).map((e,a)=>(0,s.jsxs)("div",{children:[a+2===2?"\uD83E\uDD48":"\uD83E\uDD49"," ",e.office," ",e.wins]},a))})})]}),(0,s.jsxs)("div",{className:l().stat_box,children:[(0,s.jsx)("div",{className:l().stat_label,children:"Senaste vinnaren"}),(0,s.jsx)("div",{className:"".concat(l().stat_value," ").concat(l().highlight),children:_.name}),(0,s.jsxs)("div",{className:l().stat_subtext,children:[_.votes," r\xf6ster i runda ",_.round]})]}),(0,s.jsxs)("div",{className:l().stat_box,children:[(0,s.jsx)("div",{className:l().stat_label,children:"H\xf6gst antal r\xf6ster totalt"}),(0,s.jsx)("div",{className:"".concat(l().stat_value," ").concat(l().highlight),children:u.name}),(0,s.jsxs)("div",{className:l().stat_subtext,children:[u.value," r\xf6ster i totalt ",u.totalRounds," runder"]})]})]})};var u=t(9159),h=t.n(u);async function v(e){let a=await fetch(e),t=await a.text(),s=h().parse(t,{header:!0,dynamicTyping:!0}).data.filter(e=>null!==e.Namn),n=localStorage.getItem("csvData"),l=localStorage.getItem("csvVersion"),i=a.headers.get("ETag")||Date.now().toString();if(n&&l===i){console.log("Data is already up-to-date in localStorage");return}localStorage.setItem("csvData",JSON.stringify(s)),localStorage.setItem("csvVersion",i),console.log("Data stored successfully in localStorage")}function m(e){return Object.entries(e.reduce((e,a)=>(a.Namn in e?e[a.Namn].totalWins+=1:e[a.Namn]={totalWins:1,office:a.Kontor},e),{})).map(e=>{let[a,{totalWins:t,office:s}]=e;return{Namn:a,"Antal vinster":t,Kontor:s}}).sort((e,a)=>e["Antal vinster"]===a["Antal vinster"]?e.Namn.localeCompare(a.Namn):a["Antal vinster"]-e["Antal vinster"])}function g(){let[e,a]=(0,i.useState)([]),[t,n]=(0,i.useState)({totalVotes:0,mostWins:{Namn:"","Antal vinster":0,Kontor:""},highestVotes:{value:0,name:"",round:0},officeRanking:[],latestWinner:{name:"",votes:0,round:0},highestTotalVotes:{name:"",value:0,totalRounds:0}}),[r,o]=(0,i.useState)([]);return(0,i.useEffect)(()=>{(async()=>{await v("/social-ai-fredag/Social_AI_Fredag.csv");let e=JSON.parse(localStorage.getItem("csvData")||"[]");if(e){a(e);let t=function(e){let a=e.reduce((e,a)=>e+(a.Röster||0),0),t=m(e)[0],s=e.reduce((e,a)=>a.Röster>e.value?{value:a.Röster,name:a.Namn,round:a.Runda}:e,{value:0,name:"",round:0}),n=Object.entries(e.reduce((e,a)=>(a.Kontor in e?e[a.Kontor]+=1:e[a.Kontor]=1,e),{})).map(e=>{let[a,t]=e;return{office:a,wins:t}}).sort((e,a)=>a.wins-e.wins),l=e.sort((e,a)=>a.Runda-e.Runda)[0];return{totalVotes:a,mostWins:t,highestVotes:s,officeRanking:n,latestWinner:{name:l.Namn,votes:l.Röster,round:l.Runda},highestTotalVotes:Object.entries(e.reduce((e,a)=>(a.Namn in e?(e[a.Namn].votes+=a.Röster||0,e[a.Namn].totalRounds+=1):e[a.Namn]={votes:a.Röster||0,totalRounds:1},e),{})).reduce((e,a)=>{let[t,{votes:s,totalRounds:n}]=a;return s>e.value?{name:t,value:s,totalRounds:n}:e},{name:"",value:0,totalRounds:0})}}(e);console.log(t),n(t)}o(m(e))})()},[]),(0,s.jsxs)("div",{className:l().wrapper,children:[(0,s.jsxs)("div",{className:"".concat(l().container," ").concat(l().voteResult),children:[(0,s.jsx)("h1",{children:"Social AI R\xf6stresultat"}),(0,s.jsx)(_,{...t}),(0,s.jsx)(c,{testId:"rounds",data:e,paginated:!0,rowsPerPage:5})]}),(0,s.jsxs)("div",{className:"".concat(l().container," ").concat(l().winners),children:[(0,s.jsx)("h1",{children:"Vinster"}),(0,s.jsx)(c,{data:r,paginated:!0,rowsPerPage:14})]})]})}},8334:e=>{e.exports={container:"page_container__aoG4z",voteResult:"page_voteResult__01CRr",winners:"page_winners__49ldD",stats:"page_stats__L5b4y",stat_box:"page_stat_box__Bxm_V",stat_label:"page_stat_label__gYSZ3",stat_value:"page_stat_value__s91E6",stat_subtext:"page_stat_subtext__PRQhu",highlight:"page_highlight__KaGfy",disabled:"page_disabled__of06h",wrapper:"page_wrapper__xDBJh",numberCell:"page_numberCell__3Pf6a",textCell:"page_textCell__OMaV7",pagination:"page_pagination__8VB5K",active:"page_active__q3_T3",officeRanking:"page_officeRanking__svm3P",skeletonCell:"page_skeletonCell__kjMup",loader:"page_loader__g9BIl",spinner:"page_spinner__1WnEQ",spin:"page_spin__W_8_q",celebratedRow:"page_celebratedRow__6s5X8"}}},e=>{var a=a=>e(e.s=a);e.O(0,[397,251,441,517,358],()=>a(6738)),_N_E=e.O()}]);